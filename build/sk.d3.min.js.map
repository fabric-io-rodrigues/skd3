{"version":3,"sources":["../src/init.js","../node_modules/d3-sankey/build/d3-sankey.min.js","../node_modules/d3-tip/index.js","../src/core.js"],"names":["sk","alertVersion","alert","this","version","d3","require","module","exports","window","n","t","define","amd","e","r","o","target","depth","c","sourceLinks","length","s","a","d","source","index","h","y0","l","value","y","y1","g","k","p","v","nodes","L","links","E","get","Error","x","x1","m","x0","sankey","O","apply","arguments","H","u","i","f","forEach","targetLinks","map","q","push","Math","max","sum","indexOf","height","w","b","min","floor","z","call","sort","j","M","nest","key","sortKeys","ascending","entries","values","width","P","slice","reverse","update","nodeId","nodeAlign","nodeWidth","nodePadding","size","extent","iterations","sankeyCenter","sankeyLeft","sankeyRight","sankeyJustify","sankeyLinkHorizontal","linkHorizontal","Object","defineProperty","root","factory","tip","vis","svg","getSVGNode","point","createSVGPoint","document","body","appendChild","node","initNode","select","createElement","style","el","tagName","toLowerCase","ownerSVGElement","getNodeEl","getScreenBBox","targetel","event","getScreenCTM","parentNode","bbox","matrix","tbbox","getBBox","nw","matrixTransform","ne","se","sw","functor","direction","offset","html","show","args","Array","prototype","SVGElement","pop","coords","content","poffset","dir","nodel","directions","scrollTop","documentElement","scrollLeft","classed","direction_callbacks","top","left","hide","attr","selection","destroy","remove","offsetHeight","offsetWidth","keys","createSankey","containerId","configSankey","dataSankey","_formatValueTooltip","val","formatValue","unit","_safeValueToLink","Number","MIN_VALUE","_dataSankey","name","color","id","linkData","undefined","_updateLinksId","_dynamicFontSize","container","dimensions","margin","getBoundingClientRect","right","bottom","_getDimensions","append","path","_getFontSize","fontSize","_updateRangeFontData","dynamicSizeFontNode","enabled","scaleLinear","range","minSize","maxSize","nodeData","domain","_nodes_draggableX","_nodes_draggableY","draggableX","draggableY","colors","replace","tipLinks","tipNodes","title","candidate","topContentSVG","move","pageY","pageX","innerWidth","nodeName","linksFrom","linksTo","tooltip","labelSource","labelTarget","boxInfo","_stopTooltips","link","selectAll","data","enter","infoDiv","on","text","drag","subject","sourceEvent","stopPropagation","dx","heightNode","dy","rgb","darker","filter","_updateLinksValues","dataUpdated","transition","duration","updateData","idLinkUpdate","linkToUpdate"],"mappings":"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","file":"sk.d3.min.js","sourcesContent":["// set up main sk object\nvar sk = {};\nsk.alertVersion = function () { alert(this.version);}\n\n// Node/CommonJS - require D3\nif (typeof(module) !== 'undefined' && typeof(exports) !== 'undefined' && typeof(d3) == 'undefined') {\n    d3 = require('d3');\n}\n\n// Node/CommonJS exports\nif (typeof(module) !== 'undefined' && typeof(exports) !== 'undefined') {\n  module.exports = sk;\n}\n\nif (typeof(window) !== 'undefined') {\n  window.sk = sk;\n}\n","// https://github.com/d3/d3-sankey Version 0.7.1. Copyright 2017 Mike Bostock.\n!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-array\"),require(\"d3-collection\"),require(\"d3-shape\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-array\",\"d3-collection\",\"d3-shape\"],t):t(n.d3=n.d3||{},n.d3,n.d3,n.d3)}(this,function(n,t,e,r){\"use strict\";function o(n){return n.target.depth}function u(n){return n.depth}function i(n,t){return t-1-n.height}function c(n,t){return n.sourceLinks.length?n.depth:t-1}function f(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?t.min(n.sourceLinks,o)-1:0}function s(n){return function(){return n}}function a(n,t){return d(n.source,t.source)||n.index-t.index}function h(n,t){return d(n.target,t.target)||n.index-t.index}function d(n,t){return n.y0-t.y0}function l(n){return n.value}function y(n){return(n.y0+n.y1)/2}function g(n){return y(n.source)*n.value}function k(n){return y(n.target)*n.value}function p(n){return n.index}function v(n){return n.nodes}function L(n){return n.links}function E(n,t){var e=n.get(t);if(!e)throw new Error(\"missing: \"+t);return e}function x(n){return[n.source.x1,n.y0]}function m(n){return[n.target.x0,n.y1]}var w=function(){function n(){var n={nodes:O.apply(null,arguments),links:H.apply(null,arguments)};return r(n),o(n),u(n),i(n),f(n),n}function r(n){n.nodes.forEach(function(n,t){n.index=t,n.sourceLinks=[],n.targetLinks=[]});var t=e.map(n.nodes,q);n.links.forEach(function(n,e){n.index=e;var r=n.source,o=n.target;\"object\"!=typeof r&&(r=n.source=E(t,r)),\"object\"!=typeof o&&(o=n.target=E(t,o)),r.sourceLinks.push(n),o.targetLinks.push(n)})}function o(n){n.nodes.forEach(function(n){n.value=Math.max(t.sum(n.sourceLinks,l),t.sum(n.targetLinks,l))})}function u(n){var t,e,r;for(t=n.nodes,e=[],r=0;t.length;++r,t=e,e=[])t.forEach(function(n){n.depth=r,n.sourceLinks.forEach(function(n){e.indexOf(n.target)<0&&e.push(n.target)})});for(t=n.nodes,e=[],r=0;t.length;++r,t=e,e=[])t.forEach(function(n){n.height=r,n.targetLinks.forEach(function(n){e.indexOf(n.source)<0&&e.push(n.source)})});var o=(w-x-b)/(r-1);n.nodes.forEach(function(n){n.x1=(n.x0=x+Math.max(0,Math.min(r-1,Math.floor(z.call(null,n,r))))*o)+b})}function i(n){function r(){o.forEach(function(n){var t,e,r,o=m,u=n.length;for(n.sort(d),r=0;r<u;++r)(e=o-(t=n[r]).y0)>0&&(t.y0+=e,t.y1+=e),o=t.y1+j;if((e=o-j-M)>0)for(o=t.y0-=e,t.y1-=e,r=u-2;r>=0;--r)(e=(t=n[r]).y1+j-o)>0&&(t.y0-=e,t.y1-=e),o=t.y0})}var o=e.nest().key(function(n){return n.x0}).sortKeys(t.ascending).entries(n.nodes).map(function(n){return n.values});!function(){var e=t.min(o,function(n){return(M-m-(n.length-1)*j)/t.sum(n,l)});o.forEach(function(n){n.forEach(function(n,t){n.y1=(n.y0=t)+n.value*e})}),n.links.forEach(function(n){n.width=n.value*e})}(),r();for(var u=1,i=P;i>0;--i)!function(n){o.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var r=(t.sum(e.sourceLinks,k)/t.sum(e.sourceLinks,l)-y(e))*n;e.y0+=r,e.y1+=r}})})}(u*=.99),r(),function(n){o.forEach(function(e){e.forEach(function(e){if(e.targetLinks.length){var r=(t.sum(e.targetLinks,g)/t.sum(e.targetLinks,l)-y(e))*n;e.y0+=r,e.y1+=r}})})}(u),r()}function f(n){n.nodes.forEach(function(n){n.sourceLinks.sort(h),n.targetLinks.sort(a)}),n.nodes.forEach(function(n){var t=n.y0,e=t;n.sourceLinks.forEach(function(n){n.y0=t+n.width/2,t+=n.width}),n.targetLinks.forEach(function(n){n.y1=e+n.width/2,e+=n.width})})}var x=0,m=0,w=1,M=1,b=24,j=8,q=p,z=c,O=v,H=L,P=32;return n.update=function(n){return f(n),n},n.nodeId=function(t){return arguments.length?(q=\"function\"==typeof t?t:s(t),n):q},n.nodeAlign=function(t){return arguments.length?(z=\"function\"==typeof t?t:s(t),n):z},n.nodeWidth=function(t){return arguments.length?(b=+t,n):b},n.nodePadding=function(t){return arguments.length?(j=+t,n):j},n.nodes=function(t){return arguments.length?(O=\"function\"==typeof t?t:s(t),n):O},n.links=function(t){return arguments.length?(H=\"function\"==typeof t?t:s(t),n):H},n.size=function(t){return arguments.length?(x=m=0,w=+t[0],M=+t[1],n):[w-x,M-m]},n.extent=function(t){return arguments.length?(x=+t[0][0],w=+t[1][0],m=+t[0][1],M=+t[1][1],n):[[x,m],[w,M]]},n.iterations=function(t){return arguments.length?(P=+t,n):P},n},M=function(){return r.linkHorizontal().source(x).target(m)};n.sankey=w,n.sankeyCenter=f,n.sankeyLeft=u,n.sankeyRight=i,n.sankeyJustify=c,n.sankeyLinkHorizontal=M,Object.defineProperty(n,\"__esModule\",{value:!0})});","// d3.tip\n// Copyright (c) 2013 Justin Palmer\n//\n// Tooltips for d3.js SVG visualizations\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module with d3 as a dependency.\n    define(['d3'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    // CommonJS\n    var d3 = require('d3')\n    module.exports = factory(d3)\n  } else {\n    // Browser global.\n    root.d3.tip = factory(root.d3)\n  }\n}(this, function (d3) {\n\n  // Public - contructs a new tooltip\n  //\n  // Returns a tip\n  return function() {\n    var direction = d3_tip_direction,\n        offset    = d3_tip_offset,\n        html      = d3_tip_html,\n        node      = initNode(),\n        svg       = null,\n        point     = null,\n        target    = null\n\n    function tip(vis) {\n      svg = getSVGNode(vis)\n      point = svg.createSVGPoint()\n      document.body.appendChild(node)\n    }\n\n    // Public - show the tooltip on the screen\n    //\n    // Returns a tip\n    tip.show = function() {\n      var args = Array.prototype.slice.call(arguments)\n      if(args[args.length - 1] instanceof SVGElement) target = args.pop()\n\n      var content = html.apply(this, args),\n          poffset = offset.apply(this, args),\n          dir     = direction.apply(this, args),\n          nodel   = getNodeEl(),\n          i       = directions.length,\n          coords,\n          scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\n          scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft\n\n      nodel.html(content)\n        .style('opacity', 1).style('pointer-events', 'all')\n\n      while(i--) nodel.classed(directions[i], false)\n      coords = direction_callbacks.get(dir).apply(this)\n      nodel.classed(dir, true)\n      \t.style('top', (coords.top +  poffset[0]) + scrollTop + 'px')\n      \t.style('left', (coords.left + poffset[1]) + scrollLeft + 'px')\n\n      return tip;\n    };\n\n    // Public - hide the tooltip\n    //\n    // Returns a tip\n    tip.hide = function() {\n      var nodel = getNodeEl()\n      nodel.style('opacity', 0).style('pointer-events', 'none')\n      return tip\n    }\n\n    // Public: Proxy attr calls to the d3 tip container.  Sets or gets attribute value.\n    //\n    // n - name of the attribute\n    // v - value of the attribute\n    //\n    // Returns tip or attribute value\n    tip.attr = function(n, v) {\n      if (arguments.length < 2 && typeof n === 'string') {\n        return getNodeEl().attr(n)\n      } else {\n        var args =  Array.prototype.slice.call(arguments)\n        d3.selection.prototype.attr.apply(getNodeEl(), args)\n      }\n\n      return tip\n    }\n\n    // Public: Proxy style calls to the d3 tip container.  Sets or gets a style value.\n    //\n    // n - name of the property\n    // v - value of the property\n    //\n    // Returns tip or style property value\n    tip.style = function(n, v) {\n      if (arguments.length < 2 && typeof n === 'string') {\n        return getNodeEl().style(n)\n      } else {\n        var args = Array.prototype.slice.call(arguments)\n        d3.selection.prototype.style.apply(getNodeEl(), args)\n      }\n\n      return tip\n    }\n\n    // Public: Set or get the direction of the tooltip\n    //\n    // v - One of n(north), s(south), e(east), or w(west), nw(northwest),\n    //     sw(southwest), ne(northeast) or se(southeast)\n    //\n    // Returns tip or direction\n    tip.direction = function(v) {\n      if (!arguments.length) return direction\n      direction = v == null ? v : functor(v)\n\n      return tip\n    }\n\n    // Public: Sets or gets the offset of the tip\n    //\n    // v - Array of [x, y] offset\n    //\n    // Returns offset or\n    tip.offset = function(v) {\n      if (!arguments.length) return offset\n      offset = v == null ? v : functor(v)\n\n      return tip\n    }\n\n    // Public: sets or gets the html value of the tooltip\n    //\n    // v - String value of the tip\n    //\n    // Returns html value or tip\n    tip.html = function(v) {\n      if (!arguments.length) return html\n      html = v == null ? v : functor(v)\n\n      return tip\n    }\n\n    // Public: destroys the tooltip and removes it from the DOM\n    //\n    // Returns a tip\n    tip.destroy = function() {\n      if(node) {\n        getNodeEl().remove();\n        node = null;\n      }\n      return tip;\n    }\n\n    function d3_tip_direction() { return 'n' }\n    function d3_tip_offset() { return [0, 0] }\n    function d3_tip_html() { return ' ' }\n\n    var direction_callbacks = d3.map({\n      n:  direction_n,\n      s:  direction_s,\n      e:  direction_e,\n      w:  direction_w,\n      nw: direction_nw,\n      ne: direction_ne,\n      sw: direction_sw,\n      se: direction_se\n    }),\n\n    directions = direction_callbacks.keys()\n\n    function direction_n() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.n.y - node.offsetHeight,\n        left: bbox.n.x - node.offsetWidth / 2\n      }\n    }\n\n    function direction_s() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.s.y,\n        left: bbox.s.x - node.offsetWidth / 2\n      }\n    }\n\n    function direction_e() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.e.y - node.offsetHeight / 2,\n        left: bbox.e.x\n      }\n    }\n\n    function direction_w() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.w.y - node.offsetHeight / 2,\n        left: bbox.w.x - node.offsetWidth\n      }\n    }\n\n    function direction_nw() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.nw.y - node.offsetHeight,\n        left: bbox.nw.x - node.offsetWidth\n      }\n    }\n\n    function direction_ne() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.ne.y - node.offsetHeight,\n        left: bbox.ne.x\n      }\n    }\n\n    function direction_sw() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.sw.y,\n        left: bbox.sw.x - node.offsetWidth\n      }\n    }\n\n    function direction_se() {\n      var bbox = getScreenBBox()\n      return {\n        top:  bbox.se.y,\n        left: bbox.e.x\n      }\n    }\n\n    function initNode() {\n      var node = d3.select(document.createElement('div'));\n      node.style('position', 'absolute').style('top', 0).style('opacity', 0)\n      \t.style('pointer-events', 'none').style('box-sizing', 'border-box')\n\n      return node.node()\n    }\n\n    function getSVGNode(el) {\n      el = el.node()\n      if(el.tagName.toLowerCase() === 'svg')\n        return el\n\n      return el.ownerSVGElement\n    }\n\n    function getNodeEl() {\n      if(node === null) {\n        node = initNode();\n        // re-add node to DOM\n        document.body.appendChild(node);\n      };\n      return d3.select(node);\n    }\n\n    // Private - gets the screen coordinates of a shape\n    //\n    // Given a shape on the screen, will return an SVGPoint for the directions\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast), nw(northwest),\n    // sw(southwest).\n    //\n    //    +-+-+\n    //    |   |\n    //    +   +\n    //    |   |\n    //    +-+-+\n    //\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\n    function getScreenBBox() {\n      var targetel   = target || d3.event.target;\n\n      while ('undefined' === typeof targetel.getScreenCTM && 'undefined' === targetel.parentNode) {\n          targetel = targetel.parentNode;\n      }\n\n      var bbox       = {},\n          matrix     = targetel.getScreenCTM(),\n          tbbox      = targetel.getBBox(),\n          width      = tbbox.width,\n          height     = tbbox.height,\n          x          = tbbox.x,\n          y          = tbbox.y\n\n      point.x = x\n      point.y = y\n      bbox.nw = point.matrixTransform(matrix)\n      point.x += width\n      bbox.ne = point.matrixTransform(matrix)\n      point.y += height\n      bbox.se = point.matrixTransform(matrix)\n      point.x -= width\n      bbox.sw = point.matrixTransform(matrix)\n      point.y -= height / 2\n      bbox.w  = point.matrixTransform(matrix)\n      point.x += width\n      bbox.e = point.matrixTransform(matrix)\n      point.x -= width / 2\n      point.y -= height / 2\n      bbox.n = point.matrixTransform(matrix)\n      point.y += height\n      bbox.s = point.matrixTransform(matrix)\n\n      return bbox\n    }\n    \n    // Private - replace D3JS 3.X d3.functor() function\n    function functor(v) {\n    \treturn typeof v === \"function\" ? v : function() {\n        return v\n    \t}\n    }\n\n    return tip\n  };\n\n}));\n","sk.createSankey = function(containerId, configSankey, dataSankey) {\r\n\r\n\t// to prevent NaN value, related https://github.com/d3/d3-sankey/issues/39\r\n\tvar _safeValueToLink = function(v) { return Math.max(v, Number.MIN_VALUE); }\r\n\r\n    var _dataSankey = {\r\n        nodes: [],\r\n        links: []\r\n    };\r\n\r\n    //load data\r\n    dataSankey.nodes.map(function(d) {\r\n        _dataSankey.nodes.push({\r\n            name: d.name,\r\n            color: d.color,\r\n            id: d.id\r\n        });\r\n    });\r\n    dataSankey.links.map(function(l) {\r\n        _dataSankey.links.push({\r\n            source: l.source,\r\n            target: l.target,\r\n            id: l.id,\r\n            value: _safeValueToLink(l.value)\r\n        });\r\n    });\r\n\r\n    //var _dataSankey = Object.assign({}, dataSankey);\r\n\r\n    var _updateLinksId = function(linkData) {\r\n        for (var i = 0; i < linkData.length; i++)\r\n            if (linkData[i].id == undefined)\r\n                linkData[i].id = linkData[i].source + \" -> \" + linkData[i].target;\r\n    };\r\n    //update links id\r\n    _updateLinksId(_dataSankey.links);\r\n\r\n    //removing old svg and tips\r\n    d3.select('.d3-tip-nodes').remove();\r\n    d3.select('.d3-tip').remove();\r\n    d3.select(containerId + ' svg').remove()\r\n\r\n    var container = d3.select(containerId);\r\n\r\n    function _getDimensions(container, margin) {\r\n        var bbox = container.node().getBoundingClientRect();\r\n        return {\r\n            width: bbox.width - margin.left - margin.right,\r\n            height: bbox.height - margin.top - margin.bottom\r\n        };\r\n    }\r\n    var dimensions = _getDimensions(container, configSankey.margin);\r\n\r\n    var svg_base = container.append(\"svg\")\r\n        .attr('width', dimensions.width + configSankey.margin.left + configSankey.margin.right)\r\n        .attr('height', dimensions.height + configSankey.margin.top + configSankey.margin.bottom)\r\n        .attr(\"class\", \"sk-svg\");\r\n    var svg = svg_base.append(\"g\")\r\n        .attr('transform', \"translate(\" + configSankey.margin.left + \",\" + configSankey.margin.top + \")\");\r\n\r\n    var sankey = d3.sankey()\r\n        .nodeWidth(15)\r\n        .nodePadding(10)\r\n        .extent([\r\n            [0, 0],\r\n            [dimensions.width, dimensions.height]\r\n        ]);\r\n\r\n    var path = d3.sankeyLinkHorizontal();\r\n\r\n    //Fonts\r\n    var _getFontSize = function(d) {\r\n        return configSankey.nodes.fontSize;\r\n    }; //For default\r\n    var _dynamicFontSize;\r\n    var _updateRangeFontData = function(d) {}; //For default\r\n    if (configSankey.nodes.dynamicSizeFontNode.enabled) {\r\n        _dynamicFontSize = d3.scaleLinear().range(\r\n            [configSankey.nodes.dynamicSizeFontNode.minSize,\r\n                configSankey.nodes.dynamicSizeFontNode.maxSize\r\n            ]);\r\n        _updateRangeFontData = function(nodeData) {\r\n            _dynamicFontSize.domain(d3.extent(nodeData, function(d) {\r\n                return d.value\r\n            }));\r\n        };\r\n        _getFontSize = function(d) {\r\n            return Math.floor(_dynamicFontSize(d.value));\r\n        };\r\n    }\r\n\t\r\n\t//options defaults for drag nodes\r\n\tvar _nodes_draggableX = false;\r\n\tvar _nodes_draggableY = true;\r\n\t\r\n\tif (configSankey.nodes.draggableX != undefined) _nodes_draggableX = configSankey.nodes.draggableX;\r\n\tif (configSankey.nodes.draggableY != undefined) _nodes_draggableY = configSankey.nodes.draggableY;\r\n\r\n    //Colors\r\n    //set color in nodes, case not exists\r\n    for (var i = 0; i < _dataSankey.nodes.length; i++)\r\n        if (_dataSankey.nodes[i].color == undefined)\r\n            _dataSankey.nodes[i].color = configSankey.nodes.colors(_dataSankey.nodes[i].name.replace(/ .*/, \"\"));\r\n\r\n    //Tooltip function:\r\n    //D3 sankey diagram with view options (Austin Czarneckiï¿½s Block cc6371af0b726e61b9ab)\r\n    //https://bl.ocks.org/austinczarnecki/cc6371af0b726e61b9ab\r\n    var linkTooltipOffset = 65,\r\n        nodeTooltipOffset = 130;\r\n    var tipLinks = d3.tip().attr(\"class\", \"d3-tip\").offset([-10, 0]);\r\n    var tipNodes = d3.tip().attr(\"class\", \"d3-tip d3-tip-nodes\").offset([-10, 0]);\r\n\r\n    function _formatValueTooltip(val) {\r\n        if (configSankey.links.formatValue)\r\n            return configSankey.links.formatValue(val);\r\n        else\r\n            return val + ' ' + configSankey.links.unit;\r\n    }\r\n\r\n    tipLinks.html(function(d) {\r\n        var title, candidate;\r\n        if (_dataSankey.links.indexOf(d.source.name) > -1) {\r\n            candidate = d.source.name;\r\n            title = d.target.name;\r\n        } else {\r\n            candidate = d.target.name;\r\n            title = d.source.name;\r\n        }\r\n        var html = '<div class=\"table-wrapper\">' +\r\n            '<center><h1>' + title + '</h1></center>' +\r\n            '<table>' +\r\n            '<tr>' +\r\n            '<td class=\"col-left\">' + candidate + '</td>' +\r\n            '<td align=\"right\">' + _formatValueTooltip(d.value) + '</td>' +\r\n            '</tr>' +\r\n            '</table>' +\r\n            '</div>';\r\n        return html;\r\n    });\r\n    var topContentSVG = d3.select('.sk-svg').node().getBoundingClientRect().top;\r\n    tipLinks.move = function(event) {\r\n        tipLinks\r\n            .style(\"top\", function() {\r\n                if (d3.event.pageY - topContentSVG - linkTooltipOffset >= 0)\r\n                    return (d3.event.pageY - linkTooltipOffset) + \"px\";\r\n                else\r\n                    return d3.event.pageY + 20 + \"px\";\r\n            })\r\n            .style(\"left\", function() {\r\n                var left = (Math.max(d3.event.pageX - linkTooltipOffset, 10));\r\n                left = Math.min(left, window.innerWidth - d3.select('.d3-tip').node().getBoundingClientRect().width - 20)\r\n                return left + \"px\";\r\n            })\r\n    };\r\n\r\n    tipNodes.html(function(d) {\r\n        var nodeName = d.name;\r\n        var linksFrom = d.targetLinks; //invert for reference\r\n        var linksTo = d.sourceLinks;\r\n        var html;\r\n\r\n        html = '<div class=\"table-wrapper\">' +\r\n            '<center><h1>' + nodeName + '</h1></center>' +\r\n            '<table>';\r\n        if (linksFrom.length > 0 & linksTo.length > 0) {\r\n            html += '<tr><td><h2>' + configSankey.tooltip.labelSource + '</h2></td><td></td></tr>'\r\n        }\r\n        for (i = 0; i < linksFrom.length; ++i) {\r\n            html += '<tr>' +\r\n                '<td class=\"col-left\">' + linksFrom[i].source.name + '</td>' +\r\n                '<td align=\"right\">' + _formatValueTooltip(linksFrom[i].value) + '</td>' +\r\n                '</tr>';\r\n        }\r\n        if (linksFrom.length > 0 & linksTo.length > 0) {\r\n            html += '<tr><td></td><td></td><tr><td></td><td></td> </tr><tr><td><h2>' + configSankey.tooltip.labelTarget + '</h2></td><td></td></tr>'\r\n        }\r\n        for (i = 0; i < linksTo.length; ++i) {\r\n            html += '<tr>' +\r\n                '<td class=\"col-left\">' + linksTo[i].target.name + '</td>' +\r\n                '<td align=\"right\">' + _formatValueTooltip(linksTo[i].value) + '</td>' +\r\n                '</tr>';\r\n        }\r\n        html += '</table></div>';\r\n        return html;\r\n    });\r\n    tipNodes.move = function(event) {\r\n        tipNodes.boxInfo = d3.select('.d3-tip-nodes').node().getBoundingClientRect();\r\n        tipNodes\r\n            .style(\"top\",\r\n                function() {\r\n                    if ((d3.event.pageY - topContentSVG - tipNodes.boxInfo.height - 20) >= 0)\r\n                        return (d3.event.pageY - tipNodes.boxInfo.height - 20) + \"px\";\r\n                    else\r\n                        return d3.event.pageY + 20 + \"px\";\r\n                }\r\n            )\r\n            .style(\"left\", function() {\r\n                var left = (Math.max(d3.event.pageX - nodeTooltipOffset, 10));\r\n                left = Math.min(left, window.innerWidth - d3.select('.d3-tip').node().getBoundingClientRect().width - 20)\r\n                return left + \"px\";\r\n            })\r\n    };\r\n\r\n    svg.call(tipLinks);\r\n    svg.call(tipNodes);\r\n    var _stopTooltips = function() {\r\n        if (tipLinks) tipLinks.hide();\r\n        if (tipNodes) tipNodes.hide();\r\n    };\r\n\r\n    //Load data\r\n    sankey(_dataSankey);\r\n\r\n    //update range font data\r\n    _updateRangeFontData(_dataSankey.nodes);\r\n\r\n\r\n    var link = svg.append(\"g\").selectAll(\".sk-link\")\r\n        .data(_dataSankey.links, function(l) {\r\n            return l.id;\r\n        })\r\n        .enter().append(\"path\")\r\n        .attr(\"class\", \"sk-link\")\r\n        .attr(\"d\", path)\r\n        .style(\"stroke\", function(l) {\r\n            return l.source.color;\r\n        })\r\n        .style(\"stroke-width\", function(l) {\r\n            return Math.max(1, l.width) + \"px\";\r\n        })\r\n        .sort(function(a, b) {\r\n            return b.width - a.width;\r\n        });\r\n    if (configSankey.tooltip.infoDiv)\r\n        link.on('mousemove', tipLinks.move).on('mouseover', tipLinks.show).on('mouseout', tipLinks.hide);\r\n    else\r\n        link.append(\"title\").text(function(d) {\r\n            return d.source.name + \" -> \" + d.target.name + \"\\n\" + _formatValueTooltip(d.value);\r\n        });\r\n\r\n    // the function for moving the nodes\r\n    function _dragmove(d) {\r\n        _stopTooltips();\r\n\t\tif (_nodes_draggableX && (d3.event.x < dimensions.width)) {\r\n            d.x0 = Math.max(0, Math.min(dimensions.width - sankey.nodeWidth(), d.x0 + d3.event.dx));\r\n            d.x1 = d.x0 + sankey.nodeWidth();\r\n\t\t}\r\n\t\tif (_nodes_draggableY && (d3.event.y < dimensions.height)) {\r\n            var heightNode = d.y1 - d.y0;\r\n            d.y0 = Math.max(0, Math.min(dimensions.height - (d.y1 - d.y0), d.y0 + d3.event.dy));\r\n            d.y1 = d.y0 + heightNode;\r\n\t\t}\r\n        d3.select(this).attr(\"transform\", \"translate(\" + d.x0 + \",\" + d.y0 + \")\");\r\n        sankey.update(_dataSankey);\r\n        link.attr(\"d\", path);\r\n    }\r\n\r\n    var node = svg.append(\"g\").selectAll(\".sk-node\")\r\n        .data(_dataSankey.nodes, function(d) {\r\n            return d.name;\r\n        })\r\n        .enter().append(\"g\")\r\n        .attr(\"class\", \"sk-node\")\r\n        .attr(\"transform\", function(d) {\r\n            return \"translate(\" + d.x0 + \",\" + d.y0 + \")\";\r\n        })\r\n    if (configSankey.tooltip.infoDiv)\r\n        node.on('mousemove', tipNodes.move).on('mouseover', tipNodes.show).on('mouseout', tipNodes.hide);\r\n    else\r\n        node.append(\"title\").text(function(d) {\r\n            return d.name + \"\\n\" + _formatValueTooltip(d.value);\r\n        });\r\n    //Drag nodes\t\r\n    if (_nodes_draggableX || _nodes_draggableY)\r\n        node.call(d3.drag().subject(function(d) {\r\n            return d;\r\n        }).on(\"start\", function(d) {\r\n            d3.event.sourceEvent.stopPropagation();\r\n            this.parentNode.appendChild(this);\r\n        }).on(\"drag\", _dragmove));\r\n\r\n    node.append(\"rect\")\r\n        .attr(\"height\", function(d) {\r\n            return (d.y1 - d.y0);\r\n        })\r\n        .attr(\"width\", sankey.nodeWidth())\r\n        .style(\"fill\", function(d) {\r\n            return d.color;\r\n        })\r\n        .style(\"stroke\", function(d) {\r\n            return d3.rgb(d.color).darker(1.8);\r\n        });\r\n\r\n    node.append(\"text\")\r\n        .attr(\"x\", -6)\r\n        .attr(\"y\", function(d) {\r\n            return (d.y1 - d.y0) / 2;\r\n        })\r\n        .attr(\"dy\", \".35em\")\r\n        .attr(\"text-anchor\", \"end\")\r\n        .attr(\"transform\", null)\r\n        .style(\"fill\", function(d) {\r\n            return d3.rgb(d.color).darker(2.4);\r\n        })\r\n        .text(function(d) {\r\n            return d.name;\r\n        })\r\n        .style(\"font-size\", function(d) {\r\n            return _getFontSize(d) + \"px\";\r\n        })\r\n        .filter(function(d) {\r\n            return d.x0 < dimensions.width / 2;\r\n        })\r\n        .attr(\"x\", 6 + sankey.nodeWidth())\r\n        .attr(\"text-anchor\", \"start\");\r\n\r\n    //https://bl.ocks.org/syntagmatic/77c7f7e8802e8824eed473dd065c450b\r\n    var _updateLinksValues = function(dataUpdated) {\r\n        _stopTooltips();\r\n        sankey(dataUpdated);\r\n        sankey.update(dataUpdated);\r\n\r\n        //update range font data\r\n        _updateRangeFontData(dataUpdated.nodes);\r\n\r\n        svg.selectAll(\".sk-link\")\r\n            .data(dataUpdated.links, function(d) {\r\n                return d.id;\r\n            })\r\n            .sort(function(a, b) {\r\n                return b.width - a.width;\r\n            })\r\n            .transition()\r\n            .duration(1300)\r\n            .attr(\"d\", path)\r\n            .style(\"stroke-width\", function(l) {\r\n                return Math.max(1, l.width) + \"px\";\r\n            });\r\n\r\n        svg.selectAll(\".sk-node\")\r\n            .data(dataUpdated.nodes, function(d) {\r\n                return d.name;\r\n            })\r\n            .transition()\r\n            .duration(1300)\r\n            .attr(\"transform\", function(d) {\r\n                return \"translate(\" + d.x0 + \",\" + d.y0 + \")\";\r\n            });\r\n\r\n        svg.selectAll(\".sk-node rect\")\r\n            .transition()\r\n            .duration(1300)\r\n            .attr(\"height\", function(d) {\r\n                return (d.y1 - d.y0);\r\n            });\r\n\r\n        svg.selectAll(\".sk-node text\")\r\n            .transition()\r\n            .duration(1300)\r\n            .attr(\"y\", function(d) {\r\n                return (d.y1 - d.y0) / 2;\r\n            })\r\n            .style(\"font-size\", function(d) {\r\n                return _getFontSize(d) + \"px\";\r\n            });\r\n    };\r\n\r\n\t//Update value of links, for call the function '_updateLinksValues' transition values (old to new)\r\n\t//This function only update values from links\r\n    this.updateData = function(dataUpdated) {\r\n        for (var i = 0; i < dataUpdated.links.length; i++) {\r\n            var idLinkUpdate = dataUpdated.links[i].id || dataUpdated.links[i].source + \" -> \" + dataUpdated.links[i].target;\r\n            var linkToUpdate = _dataSankey.links.filter(function(l) {\r\n                return l.id == idLinkUpdate\r\n            })[0];\r\n            if (linkToUpdate) linkToUpdate.value = _safeValueToLink(dataUpdated.links[i].value);\r\n        }\r\n        _updateLinksValues(_dataSankey);\r\n    };\r\n\r\n    return this;\r\n};"]}